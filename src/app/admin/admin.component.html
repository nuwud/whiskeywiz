<div class="admin-container">
  <a href="#" class="logout-link" (click)="logout()">Logout</a>

  <h1>Whiskey Wiz</h1>
  <h2>Whiskey Wiz Admin</h2>

  <button (click)="showScoringRules()">Return to Scoring Rules</button>

  <div class="admin-layout">
    <div class="quarters-list">
      <h3>Quarters</h3>
      <div class="quarter-items">
        <div class="quarter-item" 
             *ngFor="let quarter of quarters" 
             (click)="selectQuarter(quarter)" 
             [class.active]="selectedQuarter?.id === quarter.id">
          {{quarter.name}}
          <span class="quarter-status" 
                [class.active]="quarter.active">
            ({{quarter.active ? 'Active' : 'Inactive'}})
          </span>
        </div>
      </div>
    </div>

    <div class="main-content">
      <div class="scoring-rules" *ngIf="!selectedQuarter">
        <h3>Scoring Rules</h3>
        <div class="scoring-rules-grid">
          <div class="control-group">
            Perfect Age Score: {{scoringRules.agePerfectScore}}
          </div>
          <div class="control-group">
            Age Bonus: {{scoringRules.ageBonus}}
          </div>
          <div class="control-group">
            Age Penalty Per Year: {{scoringRules.agePenaltyPerYear}}
          </div>
          <div class="control-group">
            Perfect Proof Score: {{scoringRules.proofPerfectScore}}
          </div>
          <div class="control-group">
            Proof Bonus: {{scoringRules.proofBonus}}
          </div>
          <div class="control-group">
            Proof Penalty Per Point: {{scoringRules.proofPenaltyPerPoint}}
          </div>
          <div class="control-group">
            Correct Mashbill Score: {{scoringRules.mashbillCorrectScore}}
          </div>
        </div>

        <button (click)="updateScoringRules()">Update Scoring Rules</button>

        <div class="integration-instructions">
          <h3>Integration Instructions</h3>
          
          <div class="instruction-section">
            <h4>1. Required Script</h4>
            <div class="code-block">
              <code>&lt;script src="https://whiskeywiz2.firebaseapp.com/whiskey-wiz.js" defer&gt;&lt;/script&gt;</code>
              <button (click)="copyToClipboard('script-tag')">Copy</button>
            </div>
          </div>

          <div class="instruction-section">
            <h4>2. Admin Panel Integration</h4>
            <div class="code-block">
              <code>&lt;whiskey-wiz-admin&gt;&lt;/whiskey-wiz-admin&gt;</code>
              <button (click)="copyToClipboard('admin')">Copy</button>
            </div>
          </div>

          <div class="notes-section">
            <h4>Important Notes</h4>
            <ul>
              <li>The admin panel should only be embedded on admin-specific pages</li>
              <li>Each quarter can be embedded independently</li>
              <li>Components will automatically handle authentication</li>
              <li>Changes made in admin panel affect all embedded instances</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="quarter-editor" *ngIf="selectedQuarter">
        <h3>Editing {{selectedQuarter.name}}</h3>
        
        <div class="editor-section">
          <div class="active-toggle">
            <label>
              <input type="checkbox" 
                     [(ngModel)]="selectedQuarter.active"> 
              Active Quarter
            </label>
          </div>

          <div class="samples-grid">
            <div class="sample-card" *ngFor="let num of sampleNumbers">
              <h4>Sample {{num}}</h4>
              <ng-container *ngIf="getSample(num) as sample">
                <div class="form-group">
                  <select [(ngModel)]="sample.mashbill">
                    <option value="Bourbon">Bourbon</option>
                    <option value="Rye">Rye</option>
                    <option value="Wheat">Wheat</option>
                    <option value="Single Malt">Single Malt</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Proof:</label>
                  <input type="number" [(ngModel)]="sample.proof">
                </div>
                <div class="form-group">
                  <label>Age:</label>
                  <input type="number" [(ngModel)]="sample.age">
                </div>
              </ng-container>
            </div>
          </div>

          <button (click)="updateQuarter()">Save Changes</button>

          <div class="quarter-actions" *ngIf="selectedQuarter?.id">
            <button (click)="navigateToQuarter(getQuarterId())">
              Play Quarter
            </button>
          </div>
          
          <div class="integration-code" *ngIf="selectedQuarter?.id">
            <h4>Integration Code</h4>
            <div class="code-block">
              <code>&lt;whiskey-wiz-{{getQuarterId()}}&gt;&lt;/whiskey-wiz-{{getQuarterId()}}&gt;</code>
              <button (click)="copyToClipboard(getQuarterId())">Copy</button>
            </div>
          </div>
          
        </div>
      </div>
    </div>
  </div>
</div>