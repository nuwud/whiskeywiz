<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiskey Challenge - Player</title>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCqZMaGpJGf5veYgTXmytg1bLerva-of0U",
            authDomain: "whiskeywiz2.firebaseapp.com",
            databaseURL: "https://whiskeywiz2-default-rtdb.firebaseio.com",
            projectId: "whiskeywiz2",
            storageBucket: "whiskeywiz2.appspot.com",
            messagingSenderId: "555320797929",
            appId: "1:555320797929:web:0d4b062d7f2ab330fc1e78",
            measurementId: "G-SK0TJJEPF5"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.addEventListener('DOMContentLoaded', async function () {
            const quartersContainer = document.getElementById('quarters-container');

            function createSampleInput(sampleIndex) {
                const sampleDiv = document.createElement('div');
                sampleDiv.classList.add('sample');

                const mashbillLabel = document.createElement('label');
                mashbillLabel.innerText = `Sample ${sampleIndex + 1} - Select Mashbill: `;
                const mashbillSelect = document.createElement('select');
                ['Bourbon', 'Rye', 'Wheat', 'Single Malt', 'Blend', 'Specialty'].forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.innerText = cat;
                    mashbillSelect.appendChild(option);
                });

                const proofLabel = document.createElement('label');
                proofLabel.innerText = 'Guess Proof: ';
                const proofSlider = document.createElement('input');
                proofSlider.type = 'range';
                proofSlider.min = '80';
                proofSlider.max = '130';
                proofSlider.value = '100';
                const proofValue = document.createElement('span');
                proofValue.innerText = '100';
                proofSlider.addEventListener('input', () => {
                    proofValue.innerText = proofSlider.value;
                });

                const ageLabel = document.createElement('label');
                ageLabel.innerText = 'Guess Age: ';
                const ageSlider = document.createElement('input');
                ageSlider.type = 'range';
                ageSlider.min = '1';
                ageSlider.max = '10';
                ageSlider.value = '5';
                const ageValue = document.createElement('span');
                ageValue.innerText = '5';
                ageSlider.addEventListener('input', () => {
                    ageValue.innerText = ageSlider.value;
                });

                sampleDiv.appendChild(mashbillLabel);
                sampleDiv.appendChild(mashbillSelect);
                sampleDiv.appendChild(proofLabel);
                sampleDiv.appendChild(proofSlider);
                sampleDiv.appendChild(proofValue);
                sampleDiv.appendChild(ageLabel);
                sampleDiv.appendChild(ageSlider);
                sampleDiv.appendChild(ageValue);

                return sampleDiv;
            }

            function createQuarterSection(quarterData, quarterId) {
                const quarterDiv = document.createElement('div');
                quarterDiv.classList.add('quarter');
                quarterDiv.id = `quarter-${quarterId}`;

                const quarterHeader = document.createElement('h2');
                quarterHeader.innerText = `Quarter: ${quarterData.name}`;
                quarterDiv.appendChild(quarterHeader);

                for (let i = 0; i < 4; i++) {
                    const column = document.createElement('div');
                    column.classList.add('sample-column');
                    column.appendChild(createSampleInput(i));
                    quarterDiv.appendChild(column);
                }

                quartersContainer.appendChild(quarterDiv);
            }

            const quartersSnapshot = await getDocs(collection(db, 'quarters'));
            if (quartersSnapshot.empty) {
                console.log('No quarters found.');
            } else {
                quartersSnapshot.forEach(doc => {
                    const quarterData = doc.data();
                    createQuarterSection(quarterData, doc.id);
                });
            }
        });
    </script>

    <link rel="stylesheet" href="styles.css">
    <style>
        .sample-column {
            display: inline-block;
            margin-right: 20px;
        }
        .sample {
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Whiskey Challenge</h1>
        <div id="quarters-container"></div>
    </div>
</body>

</html>
